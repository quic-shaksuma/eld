#---RelocationOverflow.test--------------------------- Executable --------------------#
#BEGIN_COMMENT
# This checks that relocation overflows result in a proper error message for
# easier diagnosability.
#END_COMMENT
#START_TEST
RUN: %clang %clangopts -c %p/Inputs/foo.c -o %t1.foo.o
RUN: %clang %clangopts -c %p/Inputs/trampoline.s -o %t1.trampoline.o
RUN: %not %link %linkopts %t1.foo.o %t1.trampoline.o -o %t2.out --no-trampolines 2>&1 | %filecheck %s

#CHECK: Error: {{.*}}.o:(.text.callfoo+0x1000000): relocation R_HEX_B22_PCREL out of range: {{.*}} is not in [-8388608, 8388607]; references 'foo'
#CHECK: Error: {{.*}}.o:(.text.callfoo+0x1000004): relocation R_HEX_B22_PCREL out of range: {{.*}} is not in [-8388608, 8388607]; references 'bar'

#END_TEST
