UNSUPPORTED: x86
#---DefinedExpr.test------------------------- LinkerScript -----------------------#
#BEGIN_COMMENT
# This test verifies that the DEFINED expression is evaluated only once. The
# original result is simply reused on re-evaluations.
#END_COMMENT
#START_TEST
RUN: %clang %clangg0opts -o %t1.o %p/Inputs/1.c -c -ffunction-sections -fno-common
RUN: %link %linkg0opts -o %t1.out %t1.o -T %p/Inputs/script.t -Map %t1.map.txt
RUN: %filecheck %s --check-prefix=MAP < %t1.map.txt
RUN: %readelf -S %t1.out | %filecheck %s
#END_TEST
MAP: .text 0x3000 {{.*}} # Offset
MAP: .data 0x4000 {{.*}} # Offset
CHECK: .text {{.*}} {{0+}}3000
CHECK: .data {{.*}} {{0+}}4000

