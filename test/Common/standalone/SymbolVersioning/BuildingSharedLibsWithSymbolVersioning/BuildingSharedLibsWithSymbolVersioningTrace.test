REQUIRES: symbol_versioning
#---BuildingSharedLibsWithSymbolVersioningTrace.test----------------------------------#
#BEGIN_COMMENT
# This test verifies the trace diagnostics that the linker emits when
# building a shared library with symbol versioning information.
#END_COMMENT
#START_TEST
RUN: %clang %clangopts -o %t1.3.o %p/Inputs/3.c -c -fPIC
RUN: %link %linkopts -o %t1.lib1.so %t1.3.o -shared --version-script %p/Inputs/vs.2.t \
RUN:   --trace=symbol-versioning 2>&1 | %filecheck %s --check-prefix=TRACE1
#END_TEST
TRACE1: Trace: Version script node matched global symbol 'baz'
TRACE1: Trace: Version script node matched global symbol 'foo@V1'
TRACE1: Trace: Version script node matched global symbol 'bar@@V1'
TRACE1: Trace: Creating symbol versioning section: .gnu.version
TRACE1: Trace: Creating symbol versioning section: .gnu.version_d
TRACE1: Trace: Assigning version IDs to output symbols
TRACE1: Trace: Creating symbol versioning fragment: .gnu.version
TRACE1: Trace: Creating symbol versioning fragment: .gnu.version_d
