#--relocPLT32dynamic.test-------Executable--#
#BEGIN_COMMENT
# Verifies R_X86_64_PLT32 relocations redirect external function calls
# through PLT entries, enabling correct dynamic linking behavior.
#END_COMMENT
#START_TEST
RUN: %clang %clangopts -c %p/Inputs/1.c -o %t.1.o
RUN: %clang %clangopts -c %p/Inputs/2.c -o %t.2.o
RUN: %link %linkopts -shared -o %t.lib2.so %t.2.o
RUN: %link %linkopts  -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o %t.out %t.1.o %t.lib2.so
RUN: %t.out; echo $? | %filecheck %s --check-prefix=EXITCODE
EXITCODE: 3